<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated by T-Systems -->
<hibernate-mapping>
    <class name="com.rsi.agp.dao.tables.poliza.explotaciones.ExplotacionAnexo" table="TB_ANEXO_MOD_EXPLOTACIONES">
        <comment>Tabla para las explotaciones modificadas en el Anexo Modificaci&#243;n Poliza</comment>
        <id name="id" type="long">
            <column name="ID" precision="15" scale="0" />
            <generator class="sequence">
            	<param name="sequence">SQ_ANEXO_MOD_EXPLOTACIONES</param>
            </generator>
        </id>
        <many-to-one name="anexoModificacion" class="com.rsi.agp.dao.tables.anexo.AnexoModificacion" lazy="no-proxy" fetch="select">
            <column name="ID_ANEXO" precision="15" scale="0" not-null="true">
                <comment>Id del anexo</comment>
            </column>
        </many-to-one>
        <many-to-one name="termino" class="com.rsi.agp.dao.tables.commons.Termino" fetch="select">
            <column name="CODPROVINCIA" precision="2" scale="0">
                <comment>C&#243;digo de provincia</comment>
            </column>
            <column name="CODTERMINO" precision="3" scale="0">
                <comment>C&#243;digo de t&#233;rmino</comment>
            </column>
            <column name="SUBTERMINO" length="1">
                <comment>C&#243;digo de subt&#233;rmino</comment>
            </column>
            <column name="CODCOMARCA" precision="2" scale="0">
                <comment>C&#243;digo de comarca</comment>
            </column>
        </many-to-one>
        <property name="tipoModificacion" type="java.lang.Character">
            <column name="TIPO_MODIFICACION" length="1">
                <comment>Tipo Modificaci&#243;n Explotaci&#243;n: (A, B, M)</comment>
            </column>
        </property>
        <property name="latitud" type="int">
            <column name="LATITUD" precision="6" scale="0">
                <comment>Latitud</comment>
            </column>
        </property>
        <property name="longitud" type="int">
            <column name="LONGITUD" precision="6" scale="0">
                <comment>Longitud</comment>
            </column>
        </property>
        <property name="numero" type="int">
            <column name="NUMERO" precision="4" scale="0">
                <comment>N&#250;mero</comment>
            </column>
        </property>
        <property name="rega" type="string">
            <column name="REGA" length="14">
                <comment>Registro de explotaciones ganaderas</comment>
            </column>
        </property>
        <property name="sigla" type="string">
            <column name="SIGLA" length="3">
                <comment>Sigla</comment>
            </column>
        </property>
        <property name="subexplotacion" type="int">
            <column name="SUBEXPLOTACION" precision="3" scale="0">
                <comment>Subexplotaci&#243;n</comment>
            </column>
        </property>
        <property name="especie" type="long">
            <column name="ESPECIE" precision="3" scale="0">
                <comment>Especie</comment>
            </column>
        </property>
		<property name="nomespecie" type="string" lazy="true" formula="(select esp.descripcion from o02agpe0.TB_SC_C_ESPECIE esp, o02agpe0.TB_POLIZAS pol, o02agpe0.TB_ANEXO_MOD anx, o02agpe0.TB_ANEXO_MOD_EXPLOTACIONES modexp where modexp.id_anexo = anx.id and anx.idpoliza = pol.idpoliza and pol.lineaseguroid = esp.lineaseguroid and modexp.especie = esp.codespecie and modexp.id = id)" />
        <property name="regimen" type="long">
            <column name="REGIMEN" precision="3" scale="0">
                <comment>R&#233;gimen</comment>
            </column>
        </property>
        <property name="nomregimen" type="string" lazy="true" formula="(select man.descripcion from o02agpe0.TB_SC_C_REGIMEN_MANEJO man, o02agpe0.TB_POLIZAS pol, o02agpe0.TB_ANEXO_MOD anx, o02agpe0.TB_ANEXO_MOD_EXPLOTACIONES modexp where modexp.id_anexo = anx.id and anx.idpoliza = pol.idpoliza and pol.lineaseguroid = man.lineaseguroid and modexp.regimen = man.codregimen and modexp.id = id)" />
        <set name="grupoRazaAnexos" table="TB_ANEXO_MOD_GRUPO_RAZA" inverse="true" lazy="true" fetch="select" cascade="all" order-by="CODGRUPORAZA asc, CODTIPOCAPITAL asc, CODTIPOANIMAL asc">
            <key>
                <column name="ID_EXPLOTACION_ANEXO" precision="15" scale="0">
                    <comment>Identificador de la explotaci&#243;n de anexo asociada</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.explotaciones.GrupoRazaAnexo" />
        </set>
        <set name="explotacionCoberturasAnexo" table="TB_EXPLOTACIONES_COB_ANEXO" inverse="true" lazy="true" fetch="select" cascade="all">
            <key>
                <column name="ID_EXPLOT_ANEXO" precision="15" scale="0" not-null="true">
                    <comment>Identificador de la explotaci&#243;n anexo asociada</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.explotaciones.ExplotacionCoberturaAnexo" />
        </set>
    </class>
</hibernate-mapping>

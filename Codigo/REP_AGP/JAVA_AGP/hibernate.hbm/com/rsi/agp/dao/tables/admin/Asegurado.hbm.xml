<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated by T-Systems -->
<hibernate-mapping default-lazy="true">
    <class name="com.rsi.agp.dao.tables.admin.Asegurado" table="TB_ASEGURADOS" select-before-update="true	">
        <comment>Asegurados</comment>
        <id name="id" type="long">
            <column name="ID" precision="15" scale="0" />
            <generator class="sequence">
            	<param name="sequence">SQ_ASEGURADOS</param>
            </generator>
        </id>
        <many-to-one name="usuario" class="com.rsi.agp.dao.tables.commons.Usuario" fetch="select" lazy="false">
            <column name="CODUSUARIO" length="8">
                <comment>Usuario al que est&#225; asociado el asegurado</comment>
            </column>
        </many-to-one>
        <many-to-one name="localidad" class="com.rsi.agp.dao.tables.commons.Localidad" fetch="select" lazy="false">
            <column name="CODPROVINCIA" precision="2" scale="0">
                <comment>Provincia</comment>
            </column>
            <column name="CODLOCALIDAD" precision="3" scale="0">
                <comment>Localidad</comment>
            </column>
            <column name="SUBLOCALIDAD" length="4">
                <comment>Sublocalidad</comment>
            </column>
        </many-to-one>
        <many-to-one name="via" class="com.rsi.agp.dao.tables.commons.Via" fetch="select" lazy="no-proxy">
            <column name="CLAVEVIA" length="2">
                <comment>Tipo de via: calle, plaza,...</comment>
            </column>
        </many-to-one>
        <many-to-one name="entidad" class="com.rsi.agp.dao.tables.admin.Entidad" fetch="select" lazy="false">
            <column name="CODENTIDAD" precision="4" scale="0" not-null="true">
                <comment>Entidad</comment>
            </column>
        </many-to-one>
        <property name="nifcif" type="string">
            <column name="NIFCIF" length="9" not-null="true">
                <comment>Nif/Cif del asegurado</comment>
            </column>
        </property>
        <property name="discriminante" type="string">
            <column name="DISCRIMINANTE" length="3" not-null="true">
                <comment>Discriminante</comment>
            </column>
        </property>
        <property name="tipoidentificacion" type="string">
            <column name="TIPOIDENTIFICACION" length="3">
                <comment>Identificacisn del asegurado: NIF o CIF.</comment>
            </column>
        </property>
        <property name="nombre" type="string">
            <column name="NOMBRE" length="20">
                <comment>Nombre del asegurado</comment>
            </column>
        </property>
        <property name="apellido1" type="string">
            <column name="APELLIDO1" length="40">
                <comment>Primer apellido del asegurado</comment>
            </column>
        </property>
        <property name="apellido2" type="string" access="field">
            <column name="APELLIDO2" length="40">
                <comment>Segundo apellido del asegurado</comment>
            </column>
        </property>
        <property name="razonsocial" type="string">
            <column name="RAZONSOCIAL" length="50">
                <comment>Razsn social del asegurado (en caso de CIF)</comment>
            </column>
        </property>
        <property name="direccion" type="string">
            <column name="DIRECCION" length="200">
                <comment>Direcci&#243;n del asegurado</comment>
            </column>
        </property>
        <property name="numvia" type="string">
            <column name="NUMVIA" length="5">
                <comment>N&#250;mero del domicilio</comment>
            </column>
        </property>
        <property name="piso" type="string">
            <column name="PISO" length="12">
                <comment>Piso del domicilio</comment>
            </column>
        </property>
        <property name="bloque" type="string">
            <column name="BLOQUE" length="10">
                <comment>Bloque del domicilio</comment>
            </column>
        </property>
        <property name="escalera" type="string">
            <column name="ESCALERA" length="10">
                <comment>Escalera del domicilio</comment>
            </column>
        </property>
        <property name="codpostal" type="java.math.BigDecimal" access="field">
            <column name="CODPOSTAL" precision="5" scale="0">
                <comment>Csdigo postal</comment>
            </column>
        </property>
        <property name="telefono" type="string">
            <column name="TELEFONO" length="10">
                <comment>Telifono fijo</comment>
            </column>
        </property>
        <property name="movil" type="string">
            <column name="MOVIL" length="10">
                <comment>Telifono msvil</comment>
            </column>
        </property>
        <property name="email" type="string">
            <column name="EMAIL" length="50">
                <comment>Direccisn de correo electrsnico</comment>
            </column>
        </property>
        <property name="numsegsocial" type="string">
            <column name="NUMSEGSOCIAL" length="12">
                <comment>Nzmero de la seguridad social</comment>
            </column>
        </property>
        <property name="regimensegsocial" type="java.math.BigDecimal">
            <column name="REGIMENSEGSOCIAL" precision="1" scale="0">
                <comment>Indicador del Rigimen de Seguridad Social.5-&gt; Autsnomo6-&gt; REA Cuenta ajena7-&gt; REA Cuenta propia</comment>
            </column>
        </property>
        <property name="atp" type="string">
            <column name="ATP" length="2">
                <comment>Indicador de agricultor a tmtulo principal</comment>
            </column>
        </property>
        <property name="jovenagricultor" type="java.lang.Character">
            <column name="JOVENAGRICULTOR" length="1">
                <comment>Indica si es joven agricultor (S o N)</comment>
            </column>
        </property>
         <property name="revisado" type="java.lang.Character">
            <column name="REVISADO" length="1" not-null="true" />
        </property>
        <property name="fechaRevision" type="java.util.Date">
            <column name="FECHA_REVISION" length="7">
                <comment>Fecha en la que se ha realizado la &#250;ltima actualizaci&#243;n de datos con la informaci&#243;n del servicio web de Agroseguro</comment>
            </column>
        </property>
         <property name="fechaCarga" type="java.util.Date">
            <column name="FECHA_CARGA" length="7">
                <comment>Fecha de carga del asegurado cuando se carga de forma masiva con el boton importar</comment>
            </column>
        </property>
        <set name="aseguradoSWDatPerMeds" table="TB_ASEGURADOS_SW_DAT_PER_MED" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.admin.AseguradoSWDatPerMed" />
        </set>
        <set name="subAseguradoCCAAs" table="TB_SUBVS_ASEG_CCAA" inverse="true" lazy="extra" fetch="select">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.SubAseguradoCCAA" />
        </set>
        <set name="subAseguradoCCAAGanados" table="TB_SUBVS_ASEG_CCAA_G" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.SubAseguradoCCAAGanado" />
        </set>
        <set name="subAseguradoENESAGanados" table="TB_SUBVS_ASEG_ENESA_G" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.SubAseguradoENESAGanado" />
        </set>
        <set name="polizas" table="TB_POLIZAS" inverse="true" lazy="extra" fetch="select">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.Poliza" />
        </set>
        <set name="datoAsegurados" table="TB_DATOS_ASEGURADOS" inverse="true" lazy="true" fetch="select" cascade="delete">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.admin.DatoAsegurado" />
        </set>
        <set name="socios" table="TB_SOCIOS" inverse="true" lazy="true" fetch="select" cascade="all">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.admin.Socio" />
        </set>
        <set name="subAseguradoENESAs" table="TB_SUBVS_ASEG_ENESA" inverse="true" lazy="extra" fetch="select">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del asegurado</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.SubAseguradoENESA" />
        </set>
        <set name="usuarios" table="TB_USUARIOS" inverse="true" lazy="extra" fetch="select">
            <key>
                <column name="IDASEGURADO" precision="15" scale="0">
                    <comment>Asegurado que se carg&#243; la &#250;ltima vez que entr&#243; el usuario</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.commons.Usuario" />
        </set>
        <property name="fullName" type="string" formula="trim(trim(nombre)||' '||trim(apellido1)||' '||trim(apellido2)||' '||trim(razonsocial))"
        />   
          <property name="fechaModificacion" type="java.util.Date">
        <column name="FECHA_MODIFICACION">
            <comment>Fecha en la que se da de alta o modifica el registro</comment>
        </column>
    </property>
	
	<property name="usuarioModificacion" type="string">
        <column name="USUARIO_MODIFICACION " length="8">
            <comment>Usuario que da de alta o modifica el registro</comment>
        </column>
    </property>
    <property name="isBloqueado" type="java.lang.Integer"	
	    formula="(select nvl((select decode(blq.idestado_aseg, 'B', 1, 'D', 0) from o02agpe0.tb_bloqueos_asegurados blq where blq.id_asegurado = ID), 0) from dual)">
	</property>
    </class>
</hibernate-mapping>

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated by T-Systems -->
<hibernate-mapping>
    <class name="com.rsi.agp.dao.tables.poliza.explotaciones.Explotacion" table="TB_EXPLOTACIONES">
        <comment>Almacena las explotaciones ganaderas asociadas a una p&#243;liza</comment>
        <id name="id" type="long">
            <column name="ID" precision="15" scale="0" />
            <generator class="sequence">
            	<param name="sequence">SQ_EXPLOTACIONES</param>
            </generator>
        </id>
        <many-to-one name="termino" class="com.rsi.agp.dao.tables.commons.Termino" fetch="select" lazy="no-proxy">
            <column name="CODPROVINCIA" precision="2" scale="0" not-null="true">
                <comment>C&#243;digo de provincia</comment>
            </column>
            <column name="CODTERMINO" precision="3" scale="0" not-null="true">
                <comment>C&#243;digo de t&#233;rmino</comment>
            </column>
            <column name="SUBTERMINO" length="1" not-null="true">
                <comment>C&#243;digo de subt&#233;rmino</comment>
            </column>
            <column name="CODCOMARCA" precision="2" scale="0" not-null="true">
                <comment>C&#243;digo de comarca</comment>
            </column>
        </many-to-one>
        <many-to-one name="poliza" class="com.rsi.agp.dao.tables.poliza.Poliza" fetch="select">
            <column name="IDPOLIZA" precision="15" scale="0" not-null="true">
                <comment>Identificador de la p&#243;liza asociada</comment>
            </column>
        </many-to-one>
        <property name="latitud" type="int">
            <column name="LATITUD" precision="6" scale="0" />
        </property>
        <property name="longitud" type="int">
            <column name="LONGITUD" precision="6" scale="0" />
        </property>
        <property name="numero" type="int">
            <column name="NUMERO" precision="4" scale="0" />
        </property>
        <property name="rega" type="string">
            <column name="REGA" length="14">
                <comment>Registro de explotaciones ganaderas</comment>
            </column>
        </property>
        <property name="sigla" type="string">
            <column name="SIGLA" length="3"/>
        </property>
        <property name="subexplotacion" type="int">
            <column name="SUBEXPLOTACION" precision="3" scale="0" />
        </property>
        <property name="especie" type="long">
            <column name="ESPECIE" precision="3" scale="0" not-null="true" />
        </property>
        <property name="nomespecie" type="string" lazy="true"  formula="(select esp.descripcion from o02agpe0.tb_sc_c_especie esp where esp.codespecie = especie and esp.lineaseguroid = (select pol.lineaseguroid from o02agpe0.tb_polizas pol where pol.idpoliza = idpoliza))" />
        <property name="regimen" type="long">
            <column name="REGIMEN" precision="3" scale="0" not-null="true" />
        </property>
        <property name="nomregimen" type="string" lazy="true"  formula="(select reg.descripcion from o02agpe0.tb_sc_c_regimen_manejo reg where reg.codregimen = regimen and reg.lineaseguroid = (select pol.lineaseguroid from o02agpe0.tb_polizas pol where pol.idpoliza = idpoliza))" />
        <set name="subvExplotacionCCAAs" table="TB_SUBV_EXPLOTACION_CCAA" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="IDEXPLOTACION" precision="15" scale="0" not-null="true">
                    <comment>Identificador de la explotaci&#243;n</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.SubvExplotacionCCAA" />
        </set>
        <set name="subvExplotacionENESAs" table="TB_SUBV_EXPLOTACION_ENESA" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="IDEXPLOTACION" precision="15" scale="0" not-null="true">
                    <comment>Identificador de la explotaci&#243;n</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.SubvExplotacionENESA" />
        </set>
        <set name="grupoRazas" table="TB_GRUPO_RAZA_EXPLOTACION" inverse="true" lazy="true" fetch="select" cascade="all" order-by="CODGRUPORAZA asc, CODTIPOCAPITAL asc, CODTIPOANIMAL asc">
            <key>
                <column name="IDEXPLOTACION" precision="15" scale="0" not-null="true">
                    <comment>Identificador de la explotaci&#243;n asociada</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.explotaciones.GrupoRaza" />
        </set>
        <set name="explotacionCoberturas" table="TB_EXPLOTACIONES_COBERTURAS" inverse="true" lazy="false" fetch="select" cascade="all">
            <key>
                <column name="IDEXPLOTACION" precision="15" scale="0" not-null="true">
                    <comment>Identificador de la explotaci&#243;n asociada</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.explotaciones.ExplotacionCobertura" />
        </set>
    </class>
</hibernate-mapping>

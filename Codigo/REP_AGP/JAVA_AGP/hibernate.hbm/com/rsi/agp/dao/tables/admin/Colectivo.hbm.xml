<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated by T-Systems -->
<hibernate-mapping>
    <class name="com.rsi.agp.dao.tables.admin.Colectivo" table="TB_COLECTIVOS">
        <comment>Colectivos</comment>
        <id name="id" type="long">
            <column name="ID" precision="15" scale="0" />
            <generator class="sequence">
            	<param name="sequence">SQ_COLECTIVOS</param>
            </generator> 
        </id>
        <many-to-one name="tomador" class="com.rsi.agp.dao.tables.admin.Tomador" fetch="select" lazy="false">
            <column name="CODENTIDAD" precision="4" scale="0" not-null="true">
                <comment>Entidad</comment>
            </column>
            <column name="CIFTOMADOR" length="9" not-null="true">
                <comment>Cif del tomador</comment>
            </column>
        </many-to-one>
        <many-to-one name="linea" class="com.rsi.agp.dao.tables.poliza.Linea" fetch="select" lazy="false">
            <column name="LINEASEGUROID" precision="15" scale="0" not-null="true">
                <comment>Identificador de plan/lmnea</comment>
            </column>
        </many-to-one>
        <property name="idcolectivo" type="string">
            <column name="IDCOLECTIVO" length="7">
                <comment>Referencia del colectivo en Agroseguro</comment>
            </column>
        </property>
        <property name="nomcolectivo" type="string">
            <column name="NOMCOLECTIVO" length="50">
                <comment>Nombre del colectivo</comment>
            </column>
        </property>
        <many-to-one name="subentidadMediadora" class="com.rsi.agp.dao.tables.admin.SubentidadMediadora" fetch="select" lazy="false">
            <column name="ENTMEDIADORA" precision="4" scale="0">
                <comment>Entidad mediadora</comment>
            </column>
            <column name="SUBENTMEDIADORA" precision="4" scale="0">
                <comment>Subentidad mediadora</comment>
            </column>
        </many-to-one>
        <property name="activo" type="java.lang.Character">
            <column name="ACTIVO" length="1">
                <comment>Indica si el colectivo esta activo o no</comment>
            </column>
        </property>
        <property name="pctdescuentocol" type="java.math.BigDecimal">
            <column name="PCTDESCUENTOCOL" precision="5">
                <comment>Porcentaje de descuento por colectivo</comment>
            </column>
        </property>
        <property name="pctprimerpago" type="java.math.BigDecimal">
            <column name="PCTPRIMERPAGO" precision="5">
                <comment>Porcentaje del primer pago</comment>
            </column>
        </property>
        <property name="fechaprimerpago" type="date">
            <column name="FECHAPRIMERPAGO" length="7">
                <comment>Fecha del primer pago</comment>
            </column>
        </property>
        <property name="pctsegundopago" type="java.math.BigDecimal">
            <column name="PCTSEGUNDOPAGO" precision="5">
                <comment>Porcentaje del segundo pago</comment>
            </column>
        </property>
        <property name="fechasegundopago" type="date">
            <column name="FECHASEGUNDOPAGO" length="7">
                <comment>Fecha del segundo pago</comment>
            </column>
        </property>
        <property name="dc" type="string">
            <column name="DC" length="2">
                <comment>D&#237;gito de control del colectivo</comment>
            </column>
        </property>
        <property name="fechacambio" type="date">
            <column name="FECHACAMBIO" length="7">
                <comment>Fecha de cambio</comment>
            </column>
        </property> 
        <property name="fechaefecto" type="date">
            <column name="FECHAEFECTO" length="7">
                <comment>Fecha de efecto</comment>
            </column>
        </property>
        <property name="fechabaja" type="date">
            <column name="FECHABAJA" length="7">
                <comment>Fecha de baja del colectivo</comment>
            </column>
        </property>      
        <property name="cccEntidad" type="string">
            <column name="CCC_ENTIDAD" length="4">
                <comment>Entidad del CCC</comment>
            </column>
        </property>
        <property name="cccOficina" type="string">
            <column name="CCC_OFICINA" length="4">
                <comment>Oficina del CCC</comment>
            </column>
        </property>
        <property name="cccDc" type="string">
            <column name="CCC_DC" length="2">
                <comment>DC del CCC</comment>
            </column>
        </property>
        <property name="cccCuenta" type="string">
            <column name="CCC_CUENTA" length="10">
                <comment>Num. cuenta del CCC</comment>
            </column>
        </property>
        <property name="observaciones" type="string">
            <column name="OBSERVACIONES" length="2000">
                <comment>Observaciones</comment>
            </column>
        </property>
       <property name="isCRM" type="java.lang.Integer" lazy="true" formula="(select count(c.codentidad) from O02AGPE0.tb_entidades c, O02AGPE0.tb_grupo_entidades d where c.idgrupo = d.id and d.id = 5 and c.codentidad = CODENTIDAD)"/>
        <property name="iban" type="string">
            <column name="IBAN" length="4" not-null="true">
                <comment>Codigo IBAN de la cuenta bancaria</comment>
            </column>
        </property>
        <property name="tipoDescRecarg" type="java.lang.Integer">
            <column name="TIPO_DESC_RECARG" precision="1" scale="0">
                <comment>Indica a qu&#233; concepto pertenece el porcentaje indicado en el campo PCT_DESC_RECARG (0 - Descuento, 1 - Recargo, null en cualquier otro
                caso)</comment>
            </column>
        </property>
        <property name="pctDescRecarg" type="java.math.BigDecimal">
            <column name="PCT_DESC_RECARG" precision="5">
                <comment>Porcentaje de descuento o recargo asignado al colectivo</comment>
            </column>
        </property>
        <property name="envioIbanAgro" type="java.lang.Character">
            <column name="ENVIO_IBAN_AGRO" length="1">
                <comment>Indicador de env&#237;o del IBAN a Agroseguros asignado al colectivo</comment>
            </column>
        </property>
        <!-- PTC. 78845 ** CAMPOS NUEVOS (01.03.2022) ** Inicio */ -->
        <property name="estadoAgroseguro" type="java.lang.Integer">
            <column name="ESTADO_AGROSEGURO" precision="3" scale="0">
                <comment></comment>
            </column>
        </property>
        <property name="fechaEnvio" type="date">
            <column name="FECHA_ENVIO" length="7">
                <comment></comment>
            </column>
        </property>
        <!-- PTC. 78845 ** CAMPOS NUEVOS (01.03.2022) ** Fin */ -->
        
        <set name="historicoColectivoses" table="TB_HISTORICO_COLECTIVOS" inverse="true" lazy="true" fetch="select" cascade="delete">
            <key>
                <column name="IDCOLECTIVO" precision="15" scale="0">
                    <comment>Identificador del colectivo en TB_COLECTIVOS</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.admin.HistoricoColectivos" />
        </set>
        <set name="usuarios" table="TB_USUARIOS" inverse="true" lazy="extra" fetch="select">
            <key>
                <column name="IDCOLECTIVO" precision="15" scale="0">
                    <comment>Colectivo que se carg&#243; la &#250;ltima vez que entr&#243; el usuario</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.commons.Usuario" />
        </set>
        <set name="polizas" table="TB_POLIZAS" inverse="true" lazy="extra" fetch="select">
            <key>
                <column name="IDCOLECTIVO" precision="15" scale="0" not-null="true">
                    <comment>Identificador del colectivo</comment>
                </column>
            </key>
            <one-to-many class="com.rsi.agp.dao.tables.poliza.Poliza" />
        </set>
    </class>
</hibernate-mapping>

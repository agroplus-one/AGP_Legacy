<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated by T-Systems -->
<hibernate-mapping>
    <class name="com.rsi.agp.dao.tables.poliza.ImporteFraccionamiento" table="TB_IMPORTES_FRACCIONAMIENTO">
       <id name="id" type="long">
            <column name="ID" precision="15" scale="0" />
           <generator class="sequence">
            	<param name="sequence">SQ_IMPORTES_FRACCIONAMIENTO</param>
            </generator>
        </id>
         <many-to-one name="linea" class="com.rsi.agp.dao.tables.poliza.Linea" fetch="select">
            <column name="LINEASEGUROID" precision="15" scale="0" not-null="true">
                <comment>Identificador de la l&#195;&#173;nea</comment>
            </column>
        </many-to-one>

        <property name="importe" type="java.math.BigDecimal">
            <column name="IMPORTE" precision="9" scale="0" not-null="true">
                <comment>Importe m&#237;nimo para acogerse al fraccionamiento</comment>
            </column>
        </property>
         <many-to-one name="subentidadMediadora" class="com.rsi.agp.dao.tables.admin.SubentidadMediadora" fetch="select">
            <column name="CODENTMED" precision="4" scale="0">
                <comment>Codigo de entidad mediadora</comment>
            </column>
            <column name="CODSUBENTMED" precision="4" scale="0">
                <comment>C&#243;digo de subentidad mediadora</comment>
            </column>
        </many-to-one>
        <property name="entidad" type="java.lang.String" lazy="true"   
            formula="(select nvl((select concat(concat(o02agpe0.tb_subentidades_mediadoras.codentidad,'-'),o02agpe0.tb_subentidades_mediadoras.codsubentidad)
              from o02agpe0.tb_subentidades_mediadoras, o02agpe0.TB_IMPORTES_FRACCIONAMIENTO
             where TB_IMPORTES_FRACCIONAMIENTO.CODENTMED =o02agpe0.tb_subentidades_mediadoras.codentidad
             and o02agpe0.TB_IMPORTES_FRACCIONAMIENTO.CODSUBENTMED =o02agpe0.tb_subentidades_mediadoras.codsubentidad
             and o02agpe0.TB_IMPORTES_FRACCIONAMIENTO.Id = ID),'') from DUAL)"
            /> 
        <property name="tipo" type="java.lang.Integer">
            <column name="TIPO" precision="1" scale="0" not-null="true">
                <comment>Tipo de fraccionamiento (0 - Agroseguro, 1 - SAECA)</comment>
            </column>
        </property>
        <property name="pctRecargo" type="java.math.BigDecimal">
            <column name="PCT_RECARGO" precision="5">
                <comment>Porcentaje de recargo que se aplica al fraccionar</comment>
            </column>
        </property>
    </class>
</hibernate-mapping>
